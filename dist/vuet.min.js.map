{"version":3,"file":"vuet.min.js","sources":["../src/utils.js","../src/vuet-module.js","../src/vuet.js","../src/vuet-static.js","../src/index.js"],"sourcesContent":["const utils = {\n  isObject (obj) {\n    return obj && Object.prototype.toString(obj)\n  }\n}\n\nexport default utils\n","import utils from './utils'\n\nexport default class VuetModule {\n  constructor (opts) {\n    this.methods = {}\n    this.options = {}\n\n    const state = {\n      ...opts,\n      reset () {\n        this.state = this.data()\n      }\n    }\n\n    Object.keys(state).forEach(k => {\n      if (typeof state[k] === 'function') {\n        this.methods[k] = state[k].bind(state)\n      } else {\n        this.options[k] = state[k]\n      }\n    })\n    this.state = this.methods.data()\n    const vtm = this\n    Object.defineProperty(state, 'state', {\n      get () {\n        return vtm.state\n      },\n      set (val) {\n        vtm.state = val\n      }\n    })\n    if (utils.isObject(vtm.state)) {\n      Object.keys(vtm.state).forEach(k => {\n        Object.defineProperty(state, k, {\n          get () {\n            return vtm.state[k]\n          },\n          set (val) {\n            vtm.state[k] = val\n          }\n        })\n      })\n    }\n  }\n}\n","import VuetModule from './vuet-module'\n\nexport default class Vuet {\n  constructor () {\n    this.modules = {}\n    this.app = new Vuet.Vue({\n      data: {\n        modules: this.modules\n      }\n    })\n  }\n  _init () {\n  }\n  register (path, opts) {\n    const vtm = new VuetModule(opts)\n    Vuet.Vue.set(this.modules, path, vtm.methods)\n    this.modules[path] = vtm\n    return this\n  }\n  destroy () {\n    this.vm.$destroy()\n  }\n}\n","export default function (Vuet) {\n  Object.assign(Vuet, {\n    installed: false,\n    options: {\n      rules: {}\n    },\n    install (Vue) {\n      if (this.installed) return this\n      this.installed = true\n      this.Vue = Vue\n      Object.defineProperty(Vue.prototype, '$vuet', {\n        get () { return this.$root._vuet }\n      })\n      Vue.mixin({\n        beforeCreate () {\n          if (typeof this.$options.vuet !== 'undefined') {\n            this._vuet = this.$options.vuet\n            // this._vuet._init(this)\n          }\n        },\n        destroyed () {\n          if (typeof this.$options.vuet !== 'undefined') {\n            this._vuet = this.$options.vuet\n            this._vuet.destroy(this)\n          }\n        }\n      })\n      return this\n    },\n    mapModules (opts) {\n      const mixins = Object.keys(opts).map(name => {\n        const path = opts[name]\n        return {\n          computed: {\n            [name]: {\n              get () {\n                return this.$vuet.modules[path].state\n              },\n              set (val) {\n                this.$vuet.modules[path].state = val\n              }\n            },\n            [`$${name}`]: {\n              get () {\n                return this.$vuet.modules[path].methods\n              },\n              set () { }\n            }\n          }\n        }\n      })\n      return {\n        mixins\n      }\n    },\n    mapRules () {\n      return {}\n    }\n  })\n}\n","import Vuet from './vuet'\nimport VuetStatic from './vuet-static'\n\nVuetStatic(Vuet)\n\nexport const mapRules = Vuet.mapRules.bind(Vuet)\nexport const mapModules = Vuet.mapModules.bind(Vuet)\n\nexport default Vuet\n"],"names":["utils","obj","Object","prototype","toString","VuetModule","opts","methods","options","state","this","data","keys","forEach","k","bind","vtm","defineProperty","val","isObject","Vuet","modules","app","Vue","path","set","vm","$destroy","assign","installed","$root","_vuet","mixin","$options","vuet","destroy","map","name","$vuet","mapRules","mapModules"],"mappings":"8LAAA,IAAMA,sBACMC,SACDA,IAAOC,OAAOC,UAAUC,SAASH,snBCAvBI,EACnB,WAAaC,6BACNC,gBACAC,cAECC,QACDH,yBAEIG,MAAQC,KAAKC,iBAIfC,KAAKH,GAAOI,QAAQ,YACD,kBAAbJ,GAAMK,KACVP,QAAQO,GAAKL,EAAMK,GAAGC,KAAKN,KAE3BD,QAAQM,GAAKL,EAAMK,UAGvBL,MAAQC,KAAKH,QAAQI,UACpBK,GAAMN,YACLO,eAAeR,EAAO,8BAElBO,GAAIP,oBAERS,KACCT,MAAQS,KAGZlB,EAAMmB,SAASH,EAAIP,eACdG,KAAKI,EAAIP,OAAOI,QAAQ,mBACtBI,eAAeR,EAAOK,wBAElBE,GAAIP,MAAMK,iBAEdI,KACCT,MAAMK,GAAKI,QCpCNE,yCAEZC,gBACAC,IAAM,GAAIF,GAAKG,mBAEPb,KAAKW,uFAMVG,EAAMlB,MACRU,GAAM,GAAIX,GAAWC,YACtBiB,IAAIE,IAAIf,KAAKW,QAASG,EAAMR,EAAIT,cAChCc,QAAQG,GAAQR,EACdN,4CAGFgB,GAAGC,qBCpBG,SAAUP,UAChBQ,OAAOR,cACD,sCAIFG,SACHb,MAAKmB,UAAkBnB,WACtBmB,WAAY,OACZN,IAAMA,SACJN,eAAeM,EAAIpB,UAAW,8BACnBO,MAAKoB,MAAMC,WAEzBC,mCAEkC,KAAvBtB,KAAKuB,SAASC,YAClBH,MAAQrB,KAAKuB,SAASC,gCAKK,KAAvBxB,KAAKuB,SAASC,YAClBH,MAAQrB,KAAKuB,SAASC,UACtBH,MAAMI,QAAQzB,UAIlBA,2BAEGJ,iBACKJ,OAAOU,KAAKN,GAAM8B,IAAI,kBAC7BZ,EAAOlB,EAAK+B,6BAGbA,wBAEU3B,MAAK4B,MAAMjB,QAAQG,GAAMf,oBAE7BS,QACEoB,MAAMjB,QAAQG,GAAMf,MAAQS,aAGhCmB,wBAEM3B,MAAK4B,MAAMjB,QAAQG,GAAMjB,qECzCrCa,EAEX,IAAamB,GAAWnB,EAAKmB,SAASxB,KAAKK,GAC9BoB,EAAapB,EAAKoB,WAAWzB,KAAKK"}