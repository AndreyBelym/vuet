{"version":3,"file":"vuet.js","sources":["../src/utils.js","../src/vuet-module.js","../src/vuet.js","../src/vuet-static.js","../src/index.js"],"sourcesContent":["const utils = {\n  isObject (obj) {\n    return obj && Object.prototype.toString(obj)\n  }\n}\n\nexport default utils\n","import utils from './utils'\n\nexport default class VuetModule {\n  constructor (opts) {\n    this.methods = {}\n    this.options = {}\n\n    const state = {\n      ...opts,\n      reset () {\n        this.state = this.data()\n      }\n    }\n\n    Object.keys(state).forEach(k => {\n      if (typeof state[k] === 'function') {\n        this.methods[k] = state[k].bind(state)\n      } else {\n        this.options[k] = state[k]\n      }\n    })\n    this.state = this.methods.data()\n    const vtm = this\n    Object.defineProperty(state, 'state', {\n      get () {\n        return vtm.state\n      },\n      set (val) {\n        vtm.state = val\n      }\n    })\n    if (utils.isObject(vtm.state)) {\n      Object.keys(vtm.state).forEach(k => {\n        Object.defineProperty(state, k, {\n          get () {\n            return vtm.state[k]\n          },\n          set (val) {\n            vtm.state[k] = val\n          }\n        })\n      })\n    }\n  }\n}\n","import VuetModule from './vuet-module'\n\nexport default class Vuet {\n  constructor () {\n    this.modules = {}\n    this.app = new Vuet.Vue({\n      data: {\n        modules: this.modules\n      }\n    })\n  }\n  _init () {\n  }\n  register (path, opts) {\n    const vtm = new VuetModule(opts)\n    Vuet.Vue.set(this.modules, path, vtm.methods)\n    this.modules[path] = vtm\n    return this\n  }\n  destroy () {\n    this.vm.$destroy()\n  }\n}\n","export default function (Vuet) {\n  Object.assign(Vuet, {\n    installed: false,\n    options: {\n      rules: {}\n    },\n    install (Vue) {\n      if (this.installed) return this\n      this.installed = true\n      this.Vue = Vue\n      Object.defineProperty(Vue.prototype, '$vuet', {\n        get () { return this.$root._vuet }\n      })\n      Vue.mixin({\n        beforeCreate () {\n          if (typeof this.$options.vuet !== 'undefined') {\n            this._vuet = this.$options.vuet\n            // this._vuet._init(this)\n          }\n        },\n        destroyed () {\n          if (typeof this.$options.vuet !== 'undefined') {\n            this._vuet = this.$options.vuet\n            this._vuet.destroy(this)\n          }\n        }\n      })\n      return this\n    },\n    mapModules (opts) {\n      const mixins = Object.keys(opts).map(name => {\n        const path = opts[name]\n        return {\n          computed: {\n            [name]: {\n              get () {\n                return this.$vuet.modules[path].state\n              },\n              set (val) {\n                this.$vuet.modules[path].state = val\n              }\n            },\n            [`$${name}`]: {\n              get () {\n                return this.$vuet.modules[path].methods\n              },\n              set () { }\n            }\n          }\n        }\n      })\n      return {\n        mixins\n      }\n    },\n    mapRules () {\n      return {}\n    }\n  })\n}\n","import Vuet from './vuet'\nimport VuetStatic from './vuet-static'\n\nVuetStatic(Vuet)\n\nexport const mapRules = Vuet.mapRules.bind(Vuet)\nexport const mapModules = Vuet.mapModules.bind(Vuet)\n\nexport default Vuet\n"],"names":["utils","obj","Object","prototype","toString","VuetModule","opts","methods","options","state","data","keys","forEach","k","bind","vtm","defineProperty","val","isObject","Vuet","modules","app","Vue","path","set","vm","$destroy","assign","installed","$root","_vuet","mixin","$options","vuet","destroy","mixins","map","name","$vuet","VuetStatic","mapRules","mapModules"],"mappings":"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"}