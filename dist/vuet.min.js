!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.Vuet=t.Vuet||{})}(this,function(t){"use strict";var e={error:function(t){throw new Error("[vuet] "+t)},warn:function(t){},assertPath:function(t,e){e in t.modules||this.error("The '"+e+"' module does not exist")}},n={rule:function(t){var n=t.name;return{beforeCreate:function(){e.assertPath(this.$vuet,n),this.$vuet.signin(n).fetch()},destroyed:function(){this.$vuet.signin(n).reset()}}}},i={rule:function(t){var n=t.name;return{beforeCreate:function(){e.assertPath(this.$vuet,n),this.$vuet.signin(n).fetch()}}}},r={isObject:function(t){return t&&"[object Object]"===Object.prototype.toString.call(t)},getArgMerge:function(){var t={},e=arguments;return"string"==typeof e[0]?t[e[0]]=e.length>1?e[1]:e[0]:e[0]&&r.isObject(e[0])&&(t=e[0]),t}},o=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t},a=function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)},c=function(){function t(e){var n=this;o(this,t),this.modules={},this.store={},this.options={pathJoin:"/",modules:{}},this.app=new t.Vue({data:{modules:this.store}}),Object.assign(this.options,e);!function t(e,i){Object.keys(i).forEach(function(o){var s=[].concat(a(e),[o]),u=s.join(n.options.pathJoin);r.isObject(i[o])&&("function"==typeof i[o].data&&n.register(u,i[o]),Object.keys(i[o]).forEach(function(e){r.isObject(i[o][e])&&t(s,i[o])}))})}([],this.options.modules)}return s(t,[{key:"_init",value:function(){}},{key:"register",value:function(e,n){var i=this;return t.Vue.set(i.store,e,n.data()),Object.defineProperty(n,"state",{get:function(){return i.store[e]},set:function(t){i.store[e]=t}}),Object.assign(n,{reset:function(){this.state=this.data()}}),Object.keys(n).forEach(function(t){if("function"==typeof n[t]){var r=n[t];n[t]=function(){return r.apply(i.modules[e],arguments)}}}),r.isObject(n.state)&&Object.keys(n.state).forEach(function(t){Object.defineProperty(n,t,{get:function(){return i.store[e][t]},set:function(n){i.store[e][t]=n}})}),i.modules[e]=n,this}},{key:"signin",value:function(t){return this.modules[t]}},{key:"destroy",value:function(){this.vm.$destroy()}}]),t}();!function(t){Object.assign(t,{installed:!1,options:{rules:{}},install:function(t){return this.installed?this:(this.installed=!0,this.Vue=t,Object.defineProperty(t.prototype,"$vuet",{get:function(){return this.$root._vuet}}),t.mixin({beforeCreate:function(){void 0!==this.$options.vuet&&(this._vuet=this.$options.vuet)},destroyed:function(){void 0!==this.$options.vuet&&(this._vuet=this.$options.vuet,this._vuet.destroy(this))}}),this)},mapModules:function(t){return{mixins:Object.keys(t).map(function(n){var i,r=t[n];return{computed:(i={},u(i,n,{get:function(){return e.assertPath(this.$vuet,r),this.$vuet.modules[r].state},set:function(t){e.assertPath(this.$vuet,r),this.$vuet.modules[r].state=t}}),u(i,"$"+n,{get:function(){return e.assertPath(this.$vuet,r),this.$vuet.modules[r]},set:function(){}}),i)}})}},mapRules:function(){var e=r.getArgMerge.apply(null,arguments),n=[],i=function(e,i){var r=t.options.rules[e];"string"==typeof i?n.push(r.rule({name:i})):n.push(r.rule(i))};return Object.keys(e).forEach(function(t){var n=e[t];if(Array.isArray(n))return n.forEach(function(e){i(t,e)});i(t,n)}),{mixins:n}},rule:function(e,n){return t.options.rules[e]=n,this}})}(c),function(t){t.rule("life",n).rule("need",i)}(c);var f=c.mapRules.bind(c),h=c.mapModules.bind(c);t.mapRules=f,t.mapModules=h,t.default=c,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=vuet.min.js.map
